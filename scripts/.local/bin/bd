#!/bin/bash

# Read the MAC address of a specific device
DEVICE=$(cat $HOME/dotfiles/private/bluetooth_device)

if [ -z "$DEVICE" ]; then
    echo "Error: no MAC address found at ~/.bluetooth_device"
    exit 1
fi

# Check if the device is connected
IS_CONNECTED=$(bluetoothctl info $DEVICE | grep "Connected: yes")

if [ -z "$IS_CONNECTED" ]; then
    echo "Attempting to connect to $DEVICE"
    bluetoothctl connect $DEVICE > /dev/null 2>&1

    if [ $? -eq 0 ]; then
        echo "Connected"
    else
        echo "Failed to connect"
    fi
else
    echo "Disconnecting from $DEVICE"
    bluetoothctl disconnect $DEVICE > /dev/null 2>&1
    echo "Disconnected"
fi
