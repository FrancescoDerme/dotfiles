#!/bin/bash

# Friction password (not a real secret, just to stop me from procrastinating)
PASS="Ireallyneedtowatchyoutubeitsforeducationalpurposesisweartogod"

# Ask for password
read -s -p "Enter NextDNS disable password: " entered
echo

if [ "$entered" != "$PASS" ]; then
  echo "Error: wrong password"
  exit 1
fi

sudo tee /etc/systemd/resolved.conf > /dev/null <<EOL
[Resolve]
# No custom DNS here, will use your default network DNS
EOL

sudo systemctl restart systemd-resolved
echo "NextDNS disabled (using network default DNS)"

